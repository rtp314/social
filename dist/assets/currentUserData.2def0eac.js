import{o as h,d as m,b as P}from"./index.90289996.js";import{P as _,y as v,w as y}from"./firestore.0b02de5c.js";var w=Object.defineProperty,O=Object.defineProperties,b=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,u=(t,e,r)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j=(t,e)=>{for(var r in e||(e={}))D.call(e,r)&&u(t,r,e[r]);if(d)for(var r of d(e))g.call(e,r)&&u(t,r,e[r]);return t},E=(t,e)=>O(t,b(e)),S=(t,e,r)=>new Promise((i,s)=>{var l=a=>{try{o(r.next(a))}catch(f){s(f)}},c=a=>{try{o(r.throw(a))}catch(f){s(f)}},o=a=>a.done?i(a.value):Promise.resolve(a.value).then(l,c);o((r=r.apply(t,e)).next())});let p,U,I,n=[];h(P,t=>{if(t){U=t.uid;const e=_(m,"users",t.uid);p=v(e,F)}else p&&p()});function F(t){return S(this,null,function*(){const e=t.data(),r=e.friends;n.length===0?n=r:r.forEach(s=>{n.includes(s)||n.push(s)});const i={};yield Promise.all(n.map(s=>new Promise((l,c)=>{const o=_(m,"users",s);y(o).then(a=>a.get("email")).then(a=>{i[s]=a,l()}).catch(a=>{console.error("Error fetching friend details"),console.error(a),c()})}))),I=E(j({},e),{friends:i})})}export{U as a,I as m};
